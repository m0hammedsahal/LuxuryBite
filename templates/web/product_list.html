{% extends "base/base.html" %}

{% block content %}
<div class="container mx-auto py-8">
    <h1 class="text-3xl font-bold text-center mb-6">Product List</h1>

    <!-- Filters Section -->
    <form method="GET" class="bg-gray-100 p-4 rounded-lg mb-6">
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
            <!-- Search -->
            <input 
                type="text" 
                name="search" 
                value="{{ search_query }}" 
                placeholder="Search products..." 
                class="border border-gray-300 rounded px-4 py-2 w-full"
            />

            <!-- Category Filter -->
            <select name="category" class="border border-gray-300 rounded px-4 py-2 w-full">
                <option value="">All Categories</option>
                {% for category in categories %}
                    <option value="{{ category.id }}" {% if category_filter == category.id|stringformat:"s" %}selected{% endif %}>
                        {{ category.name }}
                    </option>
                {% endfor %}
            </select>

            <!-- Price Range -->
            <input 
                type="number" 
                name="min_price" 
                value="{{ min_price }}" 
                placeholder="Min Price" 
                class="border border-gray-300 rounded px-4 py-2 w-full"
            />
            <input 
                type="number" 
                name="max_price" 
                value="{{ max_price }}" 
                placeholder="Max Price" 
                class="border border-gray-300 rounded px-4 py-2 w-full"
            />

            <!-- Submit Button -->
            <button 
                type="submit" 
                class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition w-full">
                Apply Filters
            </button>
        </div>
    </form>

    <!-- Products Section -->
    {% if products %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for product in products %}
                <div class="bg-white shadow-lg rounded-lg overflow-hidden">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h2 class="text-lg font-bold mb-2">{{ product.name }}</h2>
                        <p class="text-gray-600 mb-2">{{ product.description|truncatewords:10 }}</p>
                        <p class="text-blue-500 font-bold mb-2">${{ product.price }}</p>
                        <a 
                            href="{% url 'web:product_detail' product.id %}" 
                            class="block bg-blue-500 text-white text-center py-2 rounded hover:bg-blue-600 transition">
                            View Details
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center text-gray-500 text-lg">No products found matching your criteria.</p>
    {% endif %}
</div>
{% endblock %}
